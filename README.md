# L'Agent

* L'Agent is an Open-Source license assistant able to answers questions about usage of a license. 
* Why L'Agent
  * Understanding legal documents is not easy. They are written by experts, for experts, using expert vocabulary.
  * when used directly AI could not be trusted enough for legal advices
* The solution
  * L'Agent preprocesses licenses by generating all usage cases related to each license
  * These use cases can be verified and fixed by a legal expert
  * L'Agent chat uses only these certified usage cases to answer to user requests
  * L'Agent write its asumptions about which license and which usage case is used to give the answer, so that the user is responsible for the shared understanding of the request, and the validity of the answer.
* Chat workflow
  1. Initial question from the user
  2. L'Agent interact until the license is fully identified
  3. Then L'Agent interact until a usage case of this license matches the user usage case
  4. Then L'Agent provides the answer using this usage case

![Architecture of L'Agent.](./assets/images/lagent_architecture.png)
* L'Agent is preloaded with 32 open source software licenses for demonstration purpose.

# Install

* define environment variables inside a .env file

```sh
# Environment variables for the LANG SMITH
LANGCHAIN_TRACING_V2=true
LANGCHAIN_API_KEY=

# Environment variables for the NVIDIA NIM API
NVIDIA_API_KEY=
```

* setup a virtual env

```sh
python3.10 -m venv venv
source venv/bin/activate
pip install -r requirements
```

* launch the Gradio app
  * '-s' option allows to share the local gradio app with others

```sh
python app.py -h
```

* use the command line interface (CLI) for generating usage cases for a license

```sh
python cli.py -h
```

# Usage

## Chat app

* Launch the Chat app
```sh
python app.py -s
```

* The Chat app has two tabs:
  * The chat interface: you can chat about your usage of a specific license.
    * For example, you can ask: 'Can I use GPL for personal use?'
    * You must clear the chat history ("clear" button) to start a new conversation and reset the context from the previous one.
  * The license database: displays all the licenses supported by the chat.
    * Select a license in the table to see its content and the list of usage cases.

## CLI for preprocessing 

* Run the usage case generator on a specific license

```sh
python cli.py -t cecill-2.1
```

* Licenses are listed in the file 

```sh
./data/licenses_and_link.yaml
```

note: This file is generated by OpenAI ChatGPT 4o with the following prompt:

```text
list all open source licenses, for each provide a link to the license text and a unique tag, output format must be yaml
```

* you can add a new license by modifying this file
* license contents are in the directory:

```sh
./data/licenses_text
```

* you can add the content of a new license in this directory, file name format is ```[license_tag].txt ```

* you can run the usage case generator on all licenses:

```sh
python cli.py -a
```

* you can list all license tags:

```sh
python cli.py -l
```

## Contributing

PRs accepted.

## License

MIT Â© Olivier Pizzato